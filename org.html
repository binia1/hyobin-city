<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>조직도 - 효빈광역시</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style> 
        body { font-family: 'Noto Sans KR', sans-serif; } 
        .dept-item { 
            padding: 6px 8px; 
            font-size: 0.9rem; 
            color: #475569; 
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
        }
        .dept-item:last-child { border-bottom: none; }
        .dept-item:hover { 
            color: #2563eb; 
            font-weight: 600; 
            background-color: #f8fafc;
            padding-left: 12px;
        }
        
        /* 모달 스타일 */
        .modal {
            transition: opacity 0.2s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.2s ease-in-out;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col relative">
    <!-- 헤더 -->
    <header class="bg-[#1e293b] text-white sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center cursor-pointer gap-3" onclick="location.href='index.html'">
                <img src="logo.png" alt="로고" class="h-10 object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                <div class="w-32 h-9 bg-white rounded hidden items-center justify-center text-slate-500 text-xs font-bold">[로고 이미지]</div>
                <span class="text-2xl font-bold tracking-wider">효빈광역시</span>
            </div>
            <div class="flex items-center space-x-5 text-gray-300">
                <button onclick="location.href='index.html'" class="hover:text-white flex items-center gap-1">
                    <i data-lucide="home" class="w-5 h-5"></i>
                    <span class="text-sm font-bold">메인으로</span>
                </button>
            </div>
        </div>
    </header>

    <div class="w-full bg-slate-800 py-12 text-center text-white relative overflow-hidden">
        <div class="relative z-10">
            <h1 class="text-4xl font-black mb-3">조직도</h1>
            <p class="text-slate-300 font-medium">시민과 함께하는 효빈광역시의 행정 조직을 안내해 드립니다.</p>
            <p class="text-xs text-slate-400 mt-2">* 각 부서명이나 부시장 카드를 클릭하시면 상세 정보를 확인하실 수 있습니다.</p>
        </div>
    </div>

    <main class="max-w-[1400px] mx-auto px-4 py-10 w-full mb-20 overflow-x-auto">
        
        <!-- 1. 시장 및 직속기관 -->
        <div class="flex flex-col items-center mb-12">
            <!-- 시장 -->
            <div class="bg-blue-600 text-white w-72 py-5 rounded-2xl shadow-xl text-center cursor-pointer hover:bg-blue-700 transition transform hover:-translate-y-1 relative z-10" onclick="location.href='mayor.html'">
                <div class="text-blue-200 text-xs font-bold mb-1">제8대 효빈광역시장 (차관급)</div>
                <div class="font-black text-3xl mb-1">박 효 빈</div>
                <div class="text-blue-100 text-sm">더불어민주당 (초선)</div>
            </div>
            
            <div class="h-8 w-0.5 bg-slate-300"></div>
            
            <!-- 직속 보좌 기관 -->
            <div class="grid grid-cols-2 gap-4 w-full max-w-2xl">
                <div class="bg-white border border-slate-200 p-4 rounded-xl shadow-sm text-center">
                    <h4 class="font-bold text-slate-700 mb-2">대변인실</h4>
                    <div class="flex flex-wrap justify-center gap-2 text-xs">
                        <span class="dept-item bg-slate-100 px-2 py-1 rounded text-slate-600" onclick="openDept('홍보담당관')">홍보담당관</span>
                        <span class="dept-item bg-slate-100 px-2 py-1 rounded text-slate-600" onclick="openDept('공보담당관')">공보담당관</span>
                        <span class="dept-item bg-blue-50 px-2 py-1 rounded text-blue-600 font-bold" onclick="openDept('뉴미디어담당관')" title="시장님 숏폼 제작 담당">뉴미디어담당관</span>
                    </div>
                </div>
                <div class="bg-white border border-slate-200 p-4 rounded-xl shadow-sm text-center">
                    <h4 class="font-bold text-slate-700 mb-2">시장 직속 보좌관</h4>
                    <div class="flex flex-wrap justify-center gap-2 text-xs">
                        <span class="dept-item bg-slate-100 px-2 py-1 rounded text-slate-600" onclick="openDept('정책수석보좌관')">정책수석보좌관</span>
                        <span class="dept-item bg-slate-100 px-2 py-1 rounded text-slate-600" onclick="openDept('정무기획보좌관')">정무기획보좌관</span>
                    </div>
                </div>
            </div>
            
            <div class="h-8 w-0.5 bg-slate-300"></div>
            
            <!-- 분기점 (부시장) -->
            <div class="w-full max-w-5xl border-t-2 border-slate-300 relative h-8">
                <div class="absolute -top-3 left-1/4 w-0.5 h-3 bg-slate-300"></div> <!-- 왼쪽 세로선 -->
                <div class="absolute -top-3 right-1/4 w-0.5 h-3 bg-slate-300"></div> <!-- 오른쪽 세로선 -->
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">
            
            <!-- ================= 행정부시장 라인 ================= -->
            <div class="flex flex-col items-center">
                <!-- 행정부시장 카드 (클릭 가능) -->
                <div class="bg-indigo-600 text-white w-64 py-3 rounded-lg shadow-md text-center mb-6 relative cursor-pointer hover:bg-indigo-700 transition" onclick="openDept('행정부시장실')">
                    <div class="font-bold text-lg">행정부시장</div>
                    <div class="text-sm">고 성 진</div>
                    <div class="absolute -bottom-6 left-1/2 w-0.5 h-6 bg-indigo-200 pointer-events-none"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                    <!-- 기획조정실 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">기획조정실</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('정책기획관')">정책기획관</div>
                            <div class="dept-item" onclick="openDept('예산담당관')">예산담당관</div>
                            <div class="dept-item" onclick="openDept('세정정책담당관')">세정정책/운영담당관</div>
                            <div class="dept-item" onclick="openDept('법무담당관')">회계재산/법무담당관</div>
                            <div class="dept-item" onclick="openDept('정보화담당관')">정보화담당관</div>
                            <div class="dept-item" onclick="openDept('규제혁신추진단')">조직/규제혁신추진단</div>
                        </div>
                    </div>

                    <!-- 시민안전실 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">시민안전실</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('안전정책과')">안전정책과</div>
                            <div class="dept-item" onclick="openDept('사회재난과')">사회/자연재난과</div>
                            <div class="dept-item" onclick="openDept('원자력안전과')">원자력안전과</div>
                            <div class="dept-item font-bold text-red-600" onclick="openDept('특별사법경찰과')" title="서브컬처 범죄 전담">특별사법경찰과(문화안전팀)</div>
                        </div>
                    </div>

                    <!-- 문화체육국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition ring-2 ring-pink-100">
                        <h4 class="font-bold text-pink-600 text-lg mb-2 flex items-center gap-2">
                            <i data-lucide="star" class="w-4 h-4"></i> 문화체육국
                        </h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('문화예술과')">문화예술과</div>
                            <div class="dept-item" onclick="openDept('문화유산과')">문화유산과</div>
                            <div class="dept-item font-bold text-purple-600" onclick="openDept('애니메이션산업과')" title="L-Project 및 HAF 총괄">애니메이션산업과</div>
                            <div class="dept-item" onclick="openDept('영상콘텐츠산업과')">영상콘텐츠산업과</div>
                            <div class="dept-item" onclick="openDept('체육진흥과')">행사/체육진흥과</div>
                        </div>
                    </div>

                    <!-- 교통국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">교통국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('공공교통정책과')">공공교통/물류정책과</div>
                            <div class="dept-item" onclick="openDept('도시철도과')">도시철도과</div>
                            <div class="dept-item" onclick="openDept('버스운영과')">버스운영과</div>
                            <div class="dept-item" onclick="openDept('택시운수과')">택시운수과</div>
                        </div>
                    </div>

                    <!-- 도시계획/균형발전 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">도시계획국 / 균형발전실</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('도시계획과')">도시계획과/시설계획과</div>
                            <div class="dept-item" onclick="openDept('도로계획과')">도로계획과/토지정보과</div>
                            <div class="dept-item" onclick="openDept('도시균형개발과')">도시균형개발과/창조도시과</div>
                            <div class="dept-item" onclick="openDept('걷기좋은효빈추진단')">걷기좋은효빈추진단</div>
                        </div>
                    </div>

                    <!-- 건축주택국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">건축주택국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('총괄건축기획과')">총괄건축기획과</div>
                            <div class="dept-item" onclick="openDept('주택정책과')">건축정책/주택정책과</div>
                            <div class="dept-item" onclick="openDept('도시디자인과')">도시디자인과</div>
                        </div>
                    </div>

                    <!-- 사회복지/여성가족 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">사회복지 / 여성가족국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('복지정책과')">복지정책과/장애인/노인복지</div>
                            <div class="dept-item" onclick="openDept('여성가족과')">여성가족과</div>
                            <div class="dept-item" onclick="openDept('아동청소년과')">출산보육/아동청소년과</div>
                        </div>
                    </div>

                    <!-- 행정자치/시민건강 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-indigo-500 hover:shadow-md transition">
                        <h4 class="font-bold text-indigo-700 text-lg mb-2">행정자치 / 시민건강국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('총무과')">총무과/인사과/자치분권과</div>
                            <div class="dept-item" onclick="openDept('통합민원과')">통합민원과</div>
                            <div class="dept-item" onclick="openDept('건강정책과')">건강정책/보건위생과</div>
                            <div class="dept-item" onclick="openDept('시민방역추진단')">시민방역추진단</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ================= 미래혁신부시장 라인 ================= -->
            <div class="flex flex-col items-center">
                <!-- 미래혁신부시장 카드 (클릭 가능) -->
                <div class="bg-emerald-600 text-white w-64 py-3 rounded-lg shadow-md text-center mb-6 relative cursor-pointer hover:bg-emerald-700 transition" onclick="openDept('미래혁신부시장실')">
                    <div class="font-bold text-lg">미래혁신부시장</div>
                    <div class="text-sm">우 진 현</div>
                    <div class="absolute -bottom-6 left-1/2 w-0.5 h-6 bg-emerald-200 pointer-events-none"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
                    <!-- 디지털경제혁신실 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">디지털경제혁신실</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('경제일자리과')">경제일자리과/투자유치과</div>
                            <div class="dept-item" onclick="openDept('미래기술혁신과')">미래기술혁신과</div>
                            <div class="dept-item" onclick="openDept('인공지능소프트웨어과')">인공지능SW/금융블록체인</div>
                            <div class="dept-item" onclick="openDept('빅데이터통계과')">빅데이터통계과</div>
                        </div>
                    </div>

                    <!-- 산업통상국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">산업통상국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('제조혁신과')">제조혁신과/미래에너지산업</div>
                            <div class="dept-item" onclick="openDept('첨단의료산업과')">첨단의료산업과</div>
                            <div class="dept-item" onclick="openDept('외교통상과')">산업입지과/외교통상과</div>
                            <div class="dept-item" onclick="openDept('남북협력기획단')">남북협력기획단</div>
                        </div>
                    </div>

                    <!-- 민생노동정책관 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">민생노동정책관</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('인권노동정책담당관')">인권노동정책담당관</div>
                            <div class="dept-item" onclick="openDept('소상공인지원담당관')">소상공인지원담당관</div>
                            <div class="dept-item" onclick="openDept('사회적경제담당관')">사회적경제담당관</div>
                        </div>
                    </div>

                    <!-- 청년산학국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">청년산학국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('청년정책과')">청년정책과</div>
                            <div class="dept-item" onclick="openDept('지산학협력과')">지산학협력과</div>
                            <div class="dept-item" onclick="openDept('창업벤처과')">창업벤처과</div>
                            <div class="dept-item" onclick="openDept('교육협력과')">교육협력과</div>
                        </div>
                    </div>

                    <!-- 관광마이스산업국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">관광마이스산업국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('관광진흥과')">관광진흥과</div>
                            <div class="dept-item" onclick="openDept('마이스산업과')">마이스산업과</div>
                            <div class="dept-item" onclick="openDept('해양레저관광과')">해양레저관광과</div>
                        </div>
                    </div>

                    <!-- 해양농수산국 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">해양농수산국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('해양수도정책과')">해양수도정책과/해운항만과</div>
                            <div class="dept-item" onclick="openDept('수산정책과')">수산정책/수산진흥과</div>
                            <div class="dept-item" onclick="openDept('농축산유통과')">농축산유통과</div>
                        </div>
                    </div>

                    <!-- 녹색환경/물정책 -->
                    <div class="bg-white p-4 rounded-lg shadow-sm border-l-4 border-emerald-500 hover:shadow-md transition">
                        <h4 class="font-bold text-emerald-700 text-lg mb-2">녹색환경 / 물정책국</h4>
                        <div class="text-sm space-y-1">
                            <div class="dept-item" onclick="openDept('환경정책과')">환경정책/기후대기/자원순환</div>
                            <div class="dept-item" onclick="openDept('공원운영과')">공원운영/산림녹지과</div>
                            <div class="dept-item" onclick="openDept('맑은물정책과')">맑은물정책/하천관리과</div>
                            <div class="dept-item" onclick="openDept('생활수질개선과')">생활수질개선과</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </main>
    <footer class="bg-white border-t border-slate-200 mt-auto pt-10 pb-12 text-[13px] tracking-tight relative z-10"><div class="max-w-6xl mx-auto px-4 text-center text-slate-400">COPYRIGHT © 2023 HYOBIN CITY. ALL RIGHTS RESERVED.</div></footer>

    <!-- 부서 상세 모달 -->
    <div id="dept-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="modal-content bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden relative z-10">
            <!-- 헤더 -->
            <div class="bg-slate-800 p-5 text-white flex justify-between items-center">
                <h3 id="modal-dept-name" class="text-xl font-bold">부서명</h3>
                <button onclick="closeModal()" class="hover:bg-slate-700 p-1 rounded-full"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            <!-- 바디 -->
            <div class="p-6">
                <!-- 소개 -->
                <div class="mb-6">
                    <h4 class="text-sm font-bold text-blue-600 mb-2 border-b pb-1 border-blue-100 flex items-center"><i data-lucide="info" class="w-4 h-4 mr-1"></i> 부서 소개</h4>
                    <p id="modal-desc" class="text-slate-600 text-sm leading-relaxed">부서 업무 설명</p>
                </div>
                
                <!-- 연락처 -->
                <div class="mb-6">
                    <h4 class="text-sm font-bold text-green-600 mb-2 border-b pb-1 border-green-100 flex items-center"><i data-lucide="phone" class="w-4 h-4 mr-1"></i> 문의</h4>
                    <p id="modal-contact" class="text-slate-800 font-bold text-lg">079-000-0000</p>
                </div>

                <!-- 직원 명단 -->
                <div>
                    <h4 class="text-sm font-bold text-slate-700 mb-3 border-b pb-1 flex items-center"><i data-lucide="users" class="w-4 h-4 mr-1"></i> 주요 업무 담당자</h4>
                    <div class="bg-slate-50 rounded-lg border border-slate-200 overflow-hidden">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-slate-100 text-slate-500 font-medium">
                                <tr>
                                    <th class="px-4 py-2 w-20">직위</th>
                                    <th class="px-4 py-2 w-24">이름</th>
                                    <th class="px-4 py-2">담당 업무</th>
                                </tr>
                            </thead>
                            <tbody id="modal-staff-list" class="divide-y divide-slate-100">
                                <!-- JS로 채워짐 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="bg-slate-50 p-4 text-center border-t border-slate-100">
                <button onclick="closeModal()" class="px-6 py-2 bg-slate-800 text-white rounded hover:bg-slate-700 transition text-sm">닫기</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // 1. 방대한 이름 풀 준비 (성씨, 이름 다양화)
        const lastNames = ['김', '이', '박', '최', '정', '강', '조', '윤', '장', '임', '한', '오', '서', '신', '권', '황', '안', '송', '전', '홍', '유', '고', '문', '양', '손', '배', '조', '백', '허', '유', '남', '심', '노', '하', '곽', '성', '차', '주', '우', '구', '신', '임', '나', '전', '민', '유', '진', '지', '엄', '채', '원', '천', '방', '공', '강', '현', '함', '변', '염', '양', '변', '여', '추', '노', '도', '소', '신', '석', '선', '설', '마', '길', '주', '연', '방', '위', '표', '명', '기', '반', '왕', '금', '옥', '육', '인', '맹', '제', '모', '장', '남', '탁', '국', '여', '진', '어', '은', '편', '구', '용'];
        const firstNames = ['민준', '서준', '도윤', '예준', '시우', '하준', '지호', '주원', '지우', '서현', '서연', '민서', '지민', '채원', '하은', '지유', '윤서', '수아', '다은', '예은', '현수', '은지', '성호', '지혜', '동훈', '예진', '재원', '경수', '지현', '준호', '수민', '지훈', '민아', '태영', '우진', '건우', '도현', '민재', '현우', '서진', '정우', '승우', '재윤', '시윤', '지후', '준우', '지원', '승현', '채은', '수빈', '유진', '시은', '민주', '예진', '수현', '은우', '연우', '하윤', '지아', '소율', '시아', '아린', '하린'];

        // 2. 부서별 고유 이름 생성기 (중복 방지 로직)
        function generateUniqueNames(count, seed) {
            const uniqueNames = new Set();
            const result = [];
            let attempt = 0;
            
            // 시드 기반 해시 생성
            let hash = 0;
            for (let i = 0; i < seed.length; i++) {
                hash = ((hash << 5) - hash) + seed.charCodeAt(i);
                hash |= 0;
            }
            
            // 시드 기반 난수 생성 함수
            const random = () => {
                const x = Math.sin(hash++) * 10000;
                return x - Math.floor(x);
            };

            while (result.length < count) {
                const lIdx = Math.floor(random() * lastNames.length);
                const fIdx = Math.floor(random() * firstNames.length);
                const name = lastNames[lIdx] + firstNames[fIdx];
                
                // 중복 체크
                if (!uniqueNames.has(name)) {
                    uniqueNames.add(name);
                    result.push(name);
                }
                
                attempt++;
                if (attempt > 100) break; // 무한 루프 방지
            }
            return result;
        }

        // 3. 고정 데이터 (임원급)
        const fixedDeptData = {
            '행정부시장실': { desc: '시 행정 전반을 총괄하며 안전, 문화, 복지 분야를 관장합니다.', contact: '079-591-2010', staff: [ {role: '행정부시장', name: '고성진', task: '행정 사무 총괄'}, {role: '비서실장', name: '김민수', task: '부시장 일정 관리'} ] },
            '미래혁신부시장실': { desc: '도시의 미래 먹거리 발굴과 경제, 산업, 환경 분야 혁신을 주도합니다.', contact: '079-591-2020', staff: [ {role: '미래혁신부시장', name: '우진현', task: '경제/혁신 사무 총괄'}, {role: '비서실장', name: '이수연', task: '부시장 일정 관리'} ] },
            '애니메이션산업과': { desc: 'L-Project 추진 및 HAF 개최, 서브컬처 성지 관리', contact: '079-591-3500', staff: [ {role: '과장', name: '박덕후', task: '애니메이션 산업 총괄'}, {role: '성지관리팀장', name: '김러브', task: '성지순례 코스 개발'}, {role: '행사팀장', name: '이뱅드', task: 'HAF 운영 기획'} ] },
            '특별사법경찰과': { desc: '민생 침해 사범 및 서브컬처 관련 범죄(굿즈 훼손 등) 수사', contact: '079-591-3800', staff: [ {role: '과장', name: '강철중', task: '수사 총괄'}, {role: '문화안전팀장', name: '마동석', task: '성지 테러 수사'}, {role: '수사팀장', name: '박형사', task: '일반 민생사법'} ] },
            '뉴미디어담당관': { desc: '시정 홍보 콘텐츠(유튜브, SNS) 기획 및 제작', contact: '079-591-2050', staff: [ {role: '담당관', name: '유튜브', task: '홍보 총괄'}, {role: '팀장', name: '김숏폼', task: '시장 출연 영상 기획'} ] },
        };

        // 4. 데이터 조회 함수 (고정 데이터 없으면 생성)
        function getDeptInfo(deptName) {
            if (fixedDeptData[deptName]) return fixedDeptData[deptName];
            
            // 이름 3개 생성 (과장, 팀장, 주무관)
            const names = generateUniqueNames(3, deptName);

            // 시드 기반 연락처 생성
            let hash = 0;
            for (let i = 0; i < deptName.length; i++) { hash = ((hash << 5) - hash) + deptName.charCodeAt(i); hash |= 0; }
            const contactNum = Math.abs(hash) % 8999 + 1000;

            return {
                desc: `${deptName} 업무 전반을 총괄하며 시민 편의 증진을 위해 노력하고 있습니다.`,
                contact: `079-591-${contactNum}`,
                staff: [
                    { role: '과장(담당관)', name: names[0], task: `${deptName} 총괄` },
                    { role: '행정팀장', name: names[1], task: '기획 및 서무' },
                    { role: '주무관', name: names[2], task: '주요 사업 담당' }
                ]
            };
        }

        function openDept(deptName) {
            const data = getDeptInfo(deptName);
            document.getElementById('modal-dept-name').innerText = deptName;
            document.getElementById('modal-desc').innerText = data.desc;
            document.getElementById('modal-contact').innerText = data.contact;
            
            const tbody = document.getElementById('modal-staff-list');
            tbody.innerHTML = '';
            data.staff.forEach(person => {
                const tr = document.createElement('tr');
                tr.className = "border-b border-slate-50 hover:bg-slate-50";
                tr.innerHTML = `
                    <td class="px-4 py-2 font-bold text-slate-700">${person.role}</td>
                    <td class="px-4 py-2 text-slate-600">${person.name}</td>
                    <td class="px-4 py-2 text-slate-500 text-xs">${person.task}</td>
                `;
                tbody.appendChild(tr);
            });

            const modal = document.getElementById('dept-modal');
            modal.classList.remove('hidden');
            setTimeout(() => { modal.classList.add('active'); }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('dept-modal');
            modal.classList.remove('active');
            setTimeout(() => { modal.classList.add('hidden'); }, 200);
        }
    </script>
</body>
</html>